#include "get_next_line.h"
#include "libft.h"
#include <fcntl.h>
#include <stdio.h>

int main(int argc, char **argv)
{
	char	*line;
	int		fd;
	int		ret;
	int		i;
	int		num_lines;

	if (argc < 2)
		write(2, "File name missing.\n", 19);
	else if (argc > 2)
		write(2, "Too many arguments.\n", 20);
	else
	{
		line = NULL;
		fd = open(argv[1], O_RDONLY);
		num_lines = 3; // Control # of calls
		i = 1;
		while (i++ <= num_lines)
		{
			ret = get_next_line(fd, &line);
			if (ret == -1)
				ft_putendl("* Error while reading!");
			else if (ret == 0)
				ft_putendl("* End of file.");
			else
				printf("%s\n", line);
			ft_strdel(&line);
		}
		close(fd);
	}
	return (0);
}

/*
** 1. Create a symlink in the root of the project with:
**		ln -s eval_tests/main.c.test main.c
** (Make sure you .gitignore the main.c symlink!)
**
** 2. Make sure your static library exists (if you use it):
**		make re -C libft
**
** 3. Compile with:
**		gcw -I libft/includes -o get_next_line.o -c get_next_line.c
**		gcw -I libft/includes -o main.o -c main.c
**		gcw -o test_gnl main.o get_next_line.o -I libft/includes -L libft/ -lft
**
**	Or just... use the Makefile, Luke!
*/
